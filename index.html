<!DOCTYPE html>
<html lang="en" ng-app="App" ng-controller="Main" manifest="manifest.appcache">
<head>
	<meta charset="UTF-8">
	<title>Nevernotes</title>

	<link rel="stylesheet" href="fonts/Material-Design-Iconic-Font.css">
	<link rel="stylesheet" href="app/vendors/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="app/css/app.min.css">
	<link rel="stylesheet" href="app/css/style.css">

	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<body>

	<div class="container">

		<div class="log" ng-show="debugMode == true"></div>

		<div class="row">
			<div class="col-lg-6">
				<div class="col-lg-4 col-sm-12 fixed">

					<button class="btn btn-default" ng-click="debugMode = !debugMode" ng-touchstart="debugMode = !debugMode">
						<i class="zmdi zmdi-developer-board"></i>
						Debug
					</button>

					<div class="searchbar">
						<input type="text" ng-model="search" placeholder="Pesquise por tags ou notas">
					</div>

					<div class="easy-post">
						<div class="content-wrapper">
							<textarea ng-model="post.value" ng-keyup="post.processInput($event)" placeholder="Escreva..." rows="4"></textarea>
						</div>
						<div class="padding">
							<input type="checkbox" ng-model="post.enterOption" id="enter-option" />
							<label for="enter-option">Aperte enter para criar nota</label>
						</div>
						<div class="padding audio-list" ng-if="audioMode == true">
							<div>
								<button class="btn btn-primary" ng-mousedown="Audio.startRecording($event)"  ng-mouseup="Audio.stopRecording()" ng-touchstart="Audio.startRecording($event)" ng-touchend="Audio.stopRecording()">
									<i class="zmdi zmdi-mic"></i>
								</button>
								Pressione para gravar.
							</div>

							<ul ng-show="post.audios.length">
								<li ng-repeat="$audio in post.audios">
									<p ng-if="debugMode == true">
										{{safeUrl($audio.url)}}
									</p>
									<audio ng-src="{{safeUrl($audio.url)}}" controls></audio>
									<button class="btn btn-default" ng-touchstart="removeAudioFromPostList($index)" ng-click="removeAudioFromPostList($index)">
										<i class="zmdi zmdi-close"></i>
									</button>
								</li>
							</ul>
						</div>
						<div class="padding photo-list" ng-if="photoMode == true">
							<input type="file" id="take-picture" accept="image/*">
						</div>
						<div class="tag-manager">
							<div class="input-group tag-input">
								<span class="input-group-addon"><i class="zmdi zmdi-tag"></i></span>
								<input type="text" ng-model="post.tagInput" ng-keydown="post.onTagInputKeydown($event)" placeholder="Enter para adicionar a tag">
							</div>

							<div class="content" ng-if="post.tags.length">
								<ul>
									<li ng-repeat="tag in post.tags">
										<span class="badge">
											{{tag.name}}
											<icon ng-touchstart="removeTag($index)" ng-click="removeTag($index)" name="close"></icon>
										</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="toolbar">
							<ul>
								<li>
									<button class="btn btn-link">
										<i class="zmdi zmdi-attachment-alt"></i>
									</button>
								</li>
								<li>
									<button class="btn btn-link" ng-touchstart="audioMode = true" ng-click="audioMode = true">
										<i class="zmdi zmdi-mic"></i>
									</button>
								</li>
								<li>
									<button class="btn btn-link" ng-touchstart="photoMode = true" ng-click="photoMode = true">
										<i class="zmdi zmdi-camera"></i>
									</button>
								</li>
								<li>
									<button class="btn btn-link">
										<i class="zmdi zmdi-videocam"></i>
									</button>
								</li>

								<li class="pull-right">
									<button ng-disabled="!post.value.length" ng-touchstart="post.save()" ng-click="post.save()" class="btn btn-primary">
										Salvar
									</button>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="col-lg-10 col-lg-offset-1">
					<div class="post-list">
						<div class="post" ng-repeat="$post in store | filter: {text: extractText(search)} | filterByTags: getTags(search)">
							<div class="content">
								<p class="text">
									{{$post.text}}
								</p>
								<ul class="post-audios" ng-show="$post.audios.length">
									<li ng-repeat="$audio in $post.audios">
										<span>
											<p><b>{{$audio.name}}</b></p>
											<audio ng-src="{{safeUrl($audio.url)}}" controls></audio>
											<!-- <button class="btn btn-primary" ng-touchstart="downloadAudio($audio)">
												<span class="zmdi zmdi-download"></span>
											</button> -->
										</span>
									</li>
								</ul>
								<div class="note-menu">
									<button class="btn btn-link" ng-touchstart="NoteMenu.position($event, $post, $index)" ng-click="NoteMenu.position($event, $post, $index)">
										<i class="zmdi zmdi-chevron-down"></i>
									</button>
								</div>
							</div>
							<div class="tags" ng-if="$post.tags.length">
								<ul>
									<li ng-repeat="tag in $post.tags">
										<span class="label label-default" ng-touchstart="addToSearchbar(tag.name)" ng-click="addToSearchbar(tag.name)">
											{{tag.name}}
										</span>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- <i class="zmdi zmdi-chevron-down"></i> -->
	<ul class="note-menu-list">
		<li>
			<button ng-touchstart="NoteMenu.hide();NoteMenu.options.Edit()" ng-click="NoteMenu.hide();NoteMenu.options.Edit()">Editar</button>
		</li>
		<li>
			<button ng-touchstart="NoteMenu.hide();NoteMenu.options.Delete()" ng-click="NoteMenu.hide();NoteMenu.options.Delete()">Deletar</button>
		</li>
	</ul>

	<script src="app/vendors/jquery/dist/jquery.min.js"></script>
	<script src="app/vendors/angular/angular-min.js"></script>

	<script src="bower_components/ngstorage/ngStorage.min.js"></script>
	<script src="bower_components/moment/min/moment.min.js"></script>
	<script src="bower_components/ngtouch/build/ngTouch.min.js"></script>

	<script src="app/vendors/recorderjs/index.js"></script>
	<script src="app/vendors/angular-fs/fs.js"></script>

	<script src="app/vendors/bootstrap/dist/js/bootstrap.min.js"></script>

	<script src="app/vendors/waves/waves.min.js"></script>

	<script src="app/vendors/auto-size/jquery.autosize.min.js"></script>
	<script src="app/vendors/nicescroll/jquery.nicescroll.min.js"></script>

	<script src="app/js/app.js"></script>
	<script src="app/services/store.js"></script>

	<script src="app/directives/btn-class.js"></script>
	<script src="app/directives/icon.js"></script>
	<script src="app/directives/autogrow.js"></script>
</body>
</html>